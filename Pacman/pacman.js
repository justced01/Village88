var layout_1 = [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 2, 2],
    [0, 0, 0, 0, 2, 1, 2, 0, 0, 0, 4, 0, 0, 0, 2, 1, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 1, 2, 0, 2, 2, 0, 2, 2, 0, 2, 1, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 1, 1, 0, 2, 0, 0, 0, 2, 0, 1, 1, 2, 0, 0, 0, 0],
    [2, 2, 2, 2, 2, 1, 2, 0, 2, 2, 2, 2, 2, 0, 2, 1, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2],
    [2, 2, 2, 1, 2, 1, 2, 1, 2, 2, 0, 2, 2, 1, 2, 1, 2, 1, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 2, 0, 2, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
];

var layout_2 = [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 2, 2],
    [2, 1, 2, 1, 2, 1, 2, 0, 0, 0, 4, 0, 0, 0, 2, 1, 2, 1, 2, 1, 2],
    [2, 1, 2, 1, 2, 1, 2, 0, 2, 2, 0, 2, 2, 0, 2, 1, 2, 1, 2, 1, 2],
    [2, 1, 2, 1, 2, 1, 1, 0, 2, 0, 0, 0, 2, 0, 1, 1, 2, 1, 2, 1, 2],
    [2, 2, 2, 2, 2, 1, 2, 0, 2, 2, 2, 2, 2, 0, 2, 1, 2, 1, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2],
    [2, 2, 2, 1, 2, 1, 2, 1, 2, 2, 1, 2, 2, 1, 2, 1, 2, 1, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
];

var layout_3 = [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 0, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2],
    [2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 2, 2],
    [0, 0, 0, 0, 2, 1, 2, 0, 0, 0, 4, 0, 0, 0, 2, 1, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 1, 2, 0, 2, 2, 0, 2, 2, 0, 2, 1, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 1, 1, 0, 2, 0, 0, 0, 2, 0, 1, 1, 2, 0, 0, 0, 0],
    [2, 2, 2, 2, 2, 1, 2, 0, 2, 2, 2, 2, 2, 0, 2, 1, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2],
    [2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 1, 2, 2, 2, 2, 1, 2, 1, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
];

var layout_4 = [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 1, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 0, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 2, 2, 2, 2],
    [2, 0, 0, 0, 1, 1, 2, 0, 0, 0, 4, 0, 0, 0, 2, 1, 1, 0, 0, 0, 2],
    [2, 1, 1, 1, 2, 1, 2, 0, 2, 2, 0, 2, 2, 0, 2, 1, 2, 1, 1, 1, 2],
    [2, 0, 0, 0, 1, 1, 1, 0, 2, 0, 0, 0, 2, 0, 1, 1, 1, 0, 0, 0, 2],
    [2, 2, 2, 2, 1, 1, 2, 0, 2, 2, 0, 2, 2, 0, 2, 1, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 0, 2, 1, 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 2, 0, 2, 1, 2],
    [2, 1, 2, 1, 0, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 0, 1, 2, 1, 2],
    [2, 2, 2, 1, 2, 1, 2, 1, 2, 2, 1, 2, 2, 1, 2, 1, 2, 1, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 1, 2],
    [2, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
];

var layout_5 = [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 2, 2, 1, 1, 2, 1, 2, 2, 1, 1, 2, 1, 2, 1, 2],
    [2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 1, 1, 2, 1, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 1, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 2, 2, 2, 2, 2],
    [0, 0, 0, 0, 2, 1, 1, 0, 0, 0, 4, 0, 0, 0, 1, 1, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 1, 2, 0, 2, 2, 0, 2, 2, 0, 2, 1, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 1, 1, 0, 2, 0, 0, 0, 2, 0, 1, 1, 2, 0, 0, 0, 0],
    [2, 2, 2, 2, 2, 1, 2, 0, 2, 2, 2, 2, 2, 0, 2, 1, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 1, 2, 1, 1, 1, 2, 2, 1, 2, 1, 2, 1, 2, 1, 1, 1, 2, 1, 2],
    [2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2],
    [2, 2, 2, 1, 2, 1, 2, 1, 1, 2, 0, 2, 2, 1, 2, 1, 2, 1, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 2, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1, 1, 1, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
];

var world = [layout_1, layout_2, layout_3, layout_4, layout_5];
var randomWorld = Math.floor(Math.random() * world.length);

var walkValue = 1;
var pacman = {
    x: 10,
    y: 12
}

var blinky = {
    x: 10,
    y: 10
}

var scores = 0;
var fruit = 0;

function displayWorld(){
    var display = '';

    for(var i = 0; i < world[randomWorld].length; i++){
        display += "\n<div class='row'>\n";
        for(var j = 0; j < world[randomWorld][i].length; j++){
            if(world[randomWorld][i][j] == 0){
                display += "<div class='empty'></div>";
            }
            else if(world[randomWorld][i][j] == 1){
                display += "<div class='pellet'></div>";
            }
            else if(world[randomWorld][i][j] == 2){
                display += "<div class='brick'></div>";
            }
            else if (world[randomWorld][i][j] == 3){
                display += "<div class='blinky'></div>";
            }
            else if (world[randomWorld][i][j] == 4){
                display += "<div class='fruit'></div>";
            }
            //...
        }
        display += "\n</div>";
    }
    document.getElementById('world').innerHTML = display;
}

function displayPacman(){
    document.getElementById('pacman').style.top = pacman.y*20+"px";
    document.getElementById('pacman').style.left = pacman.x*20+"px";
}

function displayBlinky(){
    document.getElementById('blinky').style.top = blinky.y*20+"px";
    document.getElementById('blinky').style.left = blinky.x*20+"px";
}

function displayScores(){
    document.getElementById('scores').innerHTML = scores;
}

displayWorld();
displayPacman();
displayBlinky();
displayScores();

document.onkeydown = function(event){
    if (walkValue == 1){
        walkValue = 2;
    }
    else if (walkValue == 2){
        walkValue = 3;
    }
    else if (walkValue == 3){
        walkValue = 1;
    }

    if(event.keyCode == 37 && world[randomWorld][pacman.y][pacman.x-1] != 2){ // Left
        pacman.x--;
        document.getElementById('pacman').style.backgroundImage = "url('img/pacman-left/"+walkValue+".png')";
    }
    else if(event.keyCode == 39 && world[randomWorld][pacman.y][pacman.x+1] != 2){ // Right  
        pacman.x++;
        document.getElementById('pacman').style.backgroundImage = "url('img/pacman-right/"+walkValue+".png')";
    }   
    else if(event.keyCode == 38 && world[randomWorld][pacman.y-1][pacman.x] != 2){ // Up  
        pacman.y--;
        document.getElementById('pacman').style.backgroundImage = "url('img/pacman-up/"+walkValue+".png')";
    }
    else if(event.keyCode == 40 && world[randomWorld][pacman.y+1][pacman.x] != 2){ // Down  
        pacman.y++;
        document.getElementById('pacman').style.backgroundImage = "url('img/pacman-down/"+walkValue+".png')";
    }

    if(world[randomWorld][pacman.y][pacman.x]==1){
        world[randomWorld][pacman.y][pacman.x] = 0;
        scores += 10;
    }

    if(blinky.y === pacman.y && blinky.x === pacman.x){
        alert("GAME OVER!! Click ok to play again!");
        document.location.reload();
    }

    if(world[randomWorld][pacman.y][pacman.x]==4){
        world[randomWorld][pacman.y][pacman.x] = 0;
        scores += 20;
    }

    function moveBlinky(){
        var random = Math.floor(Math.random()*4) + 37;
        console.log(random)
    
        switch(random) {
            case 37:
                console.log('in 37')
                if(world[randomWorld][blinky.y][blinky.x-1] != 2){
                    blinky.x--;
                    displayBlinky();
                }
            break;
            case 38:
                console.log('in 38')
                if(world[randomWorld][blinky.y-1][blinky.x] != 2){
                    blinky.y--;
                    displayBlinky();
                }
            break;
            case 39:
                console.log('in 39')
                if(world[randomWorld][blinky.y][blinky.x+1] != 2){
                    blinky.x++;
                    displayBlinky();
                }
            break;
            case 40:
                console.log('in 40')
                if(world[randomWorld][blinky.y+1][blinky.x] != 2){
                    blinky.y++;
                    displayBlinky();
                }
                break;
            default:
                console.log('Destroyed!!')
        }
    }

    setInterval(moveBlinky, 10000);

    displayWorld();
    displayScores();
    displayPacman();
    displayBlinky();
    moveBlinky();
}

